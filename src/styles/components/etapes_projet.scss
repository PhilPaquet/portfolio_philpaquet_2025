/* ==========================================================================
   Ã‰TAPES / COMPONENTS 
   ========================================================================== */
.etape_projet {
    display: grid;
    grid-template-columns: repeat(12, minmax(0, 1fr));
    grid-template-rows: 2fr;
    grid-column-gap: var(--spacing-lg);
    grid-row-gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);

    @media screen and (max-width: $breakpoint-sm) {
        grid-template-columns: repeat(6, minmax(0, 1fr));
        gap: 20px;
    }

    h2 {
        //grid-column: 2;
        grid-row: 1;
        grid-column: 1 / span 13;
        @media screen and (max-width: $breakpoint-sm) {
            grid-column: 1 / span 6;
        }
    }

    h3 {
        padding: var(--spacing-md) 0;
    }

    .etape_projet__nav {
        padding-top: var(--spacing-md);
        @media screen and (max-width: $breakpoint-sm) {
            padding-top: 0;
            padding-bottom: var(--spacing-sm);
        }
    }
}

.etape_projet_container {
    grid-column: 1 / span 6;
    grid-row: 2;
}

.etape_projet__media {
    grid-column: 7 / span 7;
    grid-row: 2;

    overflow: hidden;

    height: 75vh;

    @media screen and (max-width: $breakpoint-sm) {
        grid-column: 1 / span 6;
        grid-row: 3;
        height: 40vh;
    }

    .etape__media_image {
        aspect-ratio: 16/9;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;

        //margin-bottom: var(--spacing-md);
        /*
        cursor: url('data:image/svg+xml,%3Csvg width="34" height="39" viewBox="0 0 34 39" fill="none" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M10.7411 6.66695C10.7411 5.54193 11.6531 4.62991 12.7781 4.6299C13.9031 4.6299 14.8151 5.5419 14.8151 6.66692L14.8152 13.1334C14.8152 13.5193 15.086 13.8523 15.4638 13.931L28.8333 16.7169C29.2112 16.7957 29.4819 17.1287 29.4819 17.5146L29.4819 30.1217C29.4819 30.4555 29.2783 30.7556 28.9681 30.8789L20.553 34.2239C20.363 34.2994 20.1516 34.3007 19.9607 34.2276L6.28098 28.99C5.22498 28.5857 4.69292 27.4052 5.08942 26.3462C5.49231 25.2702 6.69816 24.7324 7.7679 25.1516L9.63901 25.885C10.1687 26.0925 10.7411 25.702 10.7411 25.1331L10.7411 6.66695Z" fill="%23252422"/%3E%3Cpath d="M6.74123 6.66701C6.74122 3.43704 9.27771 0.799399 12.4675 0.637701L12.7779 0.629394L13.0891 0.638122C16.2787 0.799925 18.8151 3.43707 18.8151 6.66694L18.8151 10.5435L29.6494 12.8009C31.882 13.2662 33.4822 15.234 33.4822 17.5146L33.4821 30.1214C33.4821 32.0938 32.2788 33.867 30.4459 34.5957L22.0306 37.9412C20.908 38.3874 19.6584 38.3951 18.5302 37.9631L4.85121 32.7254L4.56375 32.6077C1.6471 31.3189 0.212516 27.9628 1.34314 24.9432L1.46139 24.6517C2.40482 22.4773 4.49282 21.1204 6.74043 21.0164L6.74123 6.66701ZM12.7779 4.6293C11.653 4.62945 10.7411 5.54205 10.7411 6.66698L10.7407 25.1334C10.7405 25.7021 10.168 26.0928 9.63848 25.8852L7.76837 25.1515C6.69867 24.7323 5.4921 25.27 5.08917 26.3459C4.69266 27.4049 5.22536 28.5855 6.28136 28.9898L19.9604 34.2275C20.1513 34.3006 20.3631 34.2997 20.553 34.2242L28.9683 30.8787C29.2396 30.7708 29.4295 30.5278 29.4727 30.2452L29.4822 30.1214L29.4823 17.5146C29.4823 17.1287 29.2108 16.7956 28.833 16.7168L15.464 13.9315C15.0862 13.8527 14.815 13.5187 14.815 13.1328L14.8152 6.66697C14.8152 5.54195 13.9029 4.62929 12.7779 4.6293Z" fill="%23F2F2F2"/%3E%3C/svg%3E'),
            pointer !important;
*/
        margin-bottom: var(--spacing-md);
        gap: var(--spacing-lg);

        &:hover {
            .icon_ecran {
                transform: scale(1.2);
            }
        }

        img {
            height: 100%;
            width: 100%;
            object-fit: cover;
            display: block;
        }

        .icon_ecran {
            transition: transform 0.2s $ease-out-expo;
            transform-origin: center;
            position: absolute;
            aspect-ratio: 1/1;
            width: 8%;
            bottom: 20px;
            right: 20px;
            @media screen and (max-width: $breakpoint-sm) {
                bottom: 10px;
                right: 10px;
            }
        }
    }
}

.etape_projet__nav {
    height: 100%;
    ul {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-lg);
        justify-content: center;
        margin: 0;
        height: 100%;
        @media screen and (max-width: $breakpoint-sm) {
            gap: var(--spacing-sm);
        }
        li {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            @media screen and (max-width: $breakpoint-sm) {
                gap: var(--spacing-sm);
            }

            svg {
                color: var(--color-primary);
            }
        }
    }
}

/*
   MODALE
   ========================================================================== */

.image-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    display: none;

    &.is-active {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    &__overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(37, 36, 34, 0.95);
        opacity: 0;
        transition: opacity 0.2s $ease-out-expo;

        .is-visible & {
            opacity: 1;
        }
    }

    &__container {
        position: relative;
        width: 90%;
        max-width: 1200px;
        max-height: 90vh;
        z-index: 10;
        transform: scale(0.9);
        opacity: 0;
        transition: transform 0.2s $ease-out-expo, opacity 0.2s $ease-out-expo;
        overflow: hidden;

        .is-visible & {
            transform: scale(1);
            opacity: 1;
        }

        @media screen and (max-width: $breakpoint-sm) {
            width: 95%;
            max-height: 85vh;
        }
    }

    &__close {
        position: fixed;
        top: var(--spacing-md);
        right: var(--spacing-md);
        background: transparent;
        border: none;
        color: white;
        width: 75px;
        height: 75px;
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        transform: scale(0);
        transition: transform 0.2s $ease-out-expo;

        .is-visible & {
            transform: scale(1);
            transition: transform 0.2s $ease-out-expo;
        }

        .is-visible &:hover {
            transform: scale(1) rotate(90deg);
            color: #e63946;
        }

        @media screen and (max-width: $breakpoint-sm) {
            width: 50px;
            height: 50px;
        }

        svg {
            width: 100%;
            height: 100%;
        }
    }

    &__content {
        border-radius: 8px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        max-height: 90vh;

        color: var(--color-white);

        @media screen and (max-width: $breakpoint-sm) {
            border-radius: 4px;
        }
    }

    &__image-wrapper {
        flex: 1;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        //background-color: #f5f5f5;
        border-color: var(--color-white);
        min-height: 0;

        @media screen and (max-width: $breakpoint-sm) {
            max-height: 60vh;
        }
    }

    &__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        max-height: 70vh;

        @media screen and (max-width: $breakpoint-sm) {
            max-height: 55vh;
        }
    }

    &__description {
        padding-top: var(--spacing-md);
        p {
            margin: 0;
        }
        //background-color: white;
        //border-top: 1px solid #e0e0e0;

        @media screen and (max-width: $breakpoint-sm) {
            padding-top: var(--spacing-sm);
        }
    }
}
